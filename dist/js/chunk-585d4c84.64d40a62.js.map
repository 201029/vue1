{"version":3,"sources":["webpack:///./src/views/PersonCente.vue?921a","webpack:///src/views/PersonCente.vue","webpack:///./src/views/PersonCente.vue?9c31","webpack:///./src/views/PersonCente.vue","webpack:///./src/api/account.js","webpack:///./src/views/PersonCente.vue?32d9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","accountInfo","id","account","userGroup","_f","time","attrs","handleAvatarSuccess","beforeAvatarUpload","imgUrl","on","beforeAvatarUpload2","staticRenderFns","data","methods","console","log","res","code","isJPG","isPNG","$message","error","isLt2M","created","GetAccountInfo","filters","filterTime","component","registers","params","req","post","addAccount","accountlist","get","accountDel","batchdel","accountedit","checklogin","checkOldPwd","pwdedit","getAccountInfo","editAvatarImg"],"mappings":"kJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,UAAU,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACJ,EAAIO,GAAG,YAAYH,EAAG,MAAM,CAACA,EAAG,IAAI,CAACJ,EAAIO,GAAG,cAAcH,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,YAAYC,SAASN,EAAG,IAAI,CAACJ,EAAIO,GAAG,UAAUH,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,YAAYE,cAAcP,EAAG,IAAI,CAACJ,EAAIO,GAAG,WAAWH,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,YAAYG,gBAAgBR,EAAG,IAAI,CAACJ,EAAIO,GAAG,cAAcH,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIa,GAAG,aAAPb,CAAqBA,EAAIS,YAAYK,YAAYV,EAAG,IAAI,CAACA,EAAG,SAAS,CAACA,EAAG,SAAS,CAACW,MAAM,CAAC,KAAO,IAAI,CAACX,EAAG,YAAY,CAACE,YAAY,kBAAkBS,MAAM,CAAC,OAAS,yCAAyC,kBAAiB,EAAM,aAAaf,EAAIgB,oBAAoB,gBAAgBhB,EAAIiB,qBAAqB,CAAGjB,EAAIS,YAAkB,OAAEL,EAAG,MAAM,CAACE,YAAY,SAASS,MAAM,CAAC,IAAM,0CAA4Cf,EAAIS,YAAYS,UAAUd,EAAG,IAAI,CAACE,YAAY,yCAAyC,GAAGF,EAAG,SAAS,CAACW,MAAM,CAAC,KAAO,KAAK,CAACX,EAAG,YAAY,CAACW,MAAM,CAAC,KAAO,WAAWI,GAAG,CAAC,MAAQnB,EAAIoB,sBAAsB,CAACpB,EAAIO,GAAG,WAAW,IAAI,IAAI,QAAQ,IAC3qCc,EAAkB,G,yDCgEtB,GACEC,KADF,WAEI,MAAO,CACL,SAAN,0CACMb,YAAa,CACXC,GAAI,GACJC,QAAS,GACTC,UAAW,GACXE,KAAM,GACNI,OAAQ,MAIdK,QAAS,CAEPP,oBAFJ,SAEA,KACMQ,QAAQC,IAAIC,GADlB,IAEA,oBACmB,IAATC,IACF1B,KAAKQ,YAAYS,OAASA,IAI9BD,mBAVJ,SAUA,GACM,IAAN,wBACA,uBACA,qBAQM,OANMW,GAASC,GACb5B,KAAK6B,SAASC,MAAM,0BAEjBC,GACH/B,KAAK6B,SAASC,MAAM,qBAEfH,GAASI,GAGlB,eAxBJ,+KAyBA,iBAzBA,gBAyBA,EAzBA,EAyBA,YAEA,eAEA,mBA7BA,wGAgCI,oBAhCJ,sKAmCA,qCAnCA,SAqCA,iDArCA,gBAqCA,EArCA,EAqCA,KAEA,QACA,iBAEA,iCA1CA,yGA8CEC,QA3DF,WA4DIhC,KAAKiC,kBAIPC,QAAS,CAEPC,WAFJ,SAEA,GACM,OAAO,IAAb,oCCpIqV,I,wBCQjVC,EAAY,eACd,EACAtC,EACAsB,GACA,EACA,KACA,WACA,MAIa,aAAAgB,E,2CCnBf,sYAOaC,EAAY,SAAAC,GAAM,OAAIC,OAAIC,KAAK,qBAAsBF,IAGrDG,EAAa,SAAAH,GAAM,OAAIC,OAAIC,KAAK,sBAAuBF,IAGvDI,EAAc,SAAAJ,GAAM,OAAIC,OAAII,IAAI,uBAAwBL,IAGxDM,EAAa,SAAAN,GAAM,OAAIC,OAAII,IAAI,sBAAuBL,IAGtDO,EAAW,SAAAP,GAAM,OAAIC,OAAII,IAAI,2BAA4BL,IAGzDQ,EAAc,SAAAR,GAAM,OAAIC,OAAIC,KAAK,uBAAwBF,IAGzDS,EAAa,SAAAT,GAAM,OAAIC,OAAIC,KAAK,sBAAuBF,IAGvDU,EAAc,SAAAV,GAAM,OAAIC,OAAII,IAAI,uBAAwBL,IAGxDW,EAAU,SAAAX,GAAM,OAAIC,OAAIC,KAAK,wBAAyBF,IAGtDY,EAAiB,SAAAZ,GAAM,OAAIC,OAAII,IAAI,uBAAwBL,IAG3Da,EAAgB,SAAAb,GAAM,OAAIC,OAAII,IAAI,sBAAuBL,K,oCCrCtE,yBAA4iB,EAAG","file":"js/chunk-585d4c84.64d40a62.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"personcente\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"tatle\"},[_c('span',[_vm._v(\"个人中心\")])]),_c('div',[_c('p',[_vm._v(\" 管理原 ID : \"),_c('span',[_vm._v(_vm._s(_vm.accountInfo.id))])]),_c('p',[_vm._v(\" 账号 : \"),_c('span',[_vm._v(_vm._s(_vm.accountInfo.account))])]),_c('p',[_vm._v(\" 用户组 : \"),_c('span',[_vm._v(_vm._s(_vm.accountInfo.userGroup))])]),_c('p',[_vm._v(\" 本次登录时间 : \"),_c('span',[_vm._v(_vm._s(_vm._f(\"filterTime\")(_vm.accountInfo.time)))])]),_c('p',[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://172.16.11.202:8088/goods/upload\",\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[( _vm.accountInfo.imgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":'http://172.16.11.202:8088/upload/goods/' + _vm.accountInfo.imgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-col',{attrs:{\"span\":16}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.beforeAvatarUpload2}},[_vm._v(\"修改头像\")])],1)],1)],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"personcente\">\r\n    <el-card class=\"box-card\">\r\n      <div class=\"tatle\">\r\n        <span>个人中心</span>\r\n      </div>\r\n      <div>\r\n        <p>\r\n          管理原 ID :\r\n          <span>{{ accountInfo.id}}</span>\r\n        </p>\r\n        <p>\r\n          账号 :\r\n          <span>{{ accountInfo.account}}</span>\r\n        </p>\r\n        <p>\r\n          用户组 :\r\n          <span>{{ accountInfo.userGroup}}</span>\r\n        </p>\r\n        <p>\r\n          本次登录时间 :\r\n          <span>{{accountInfo.time | filterTime}}</span>\r\n        </p>\r\n\r\n        <p>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <!-- 商品图片 -->\r\n               <el-upload\r\n                class=\"avatar-uploader\"\r\n                action=\"http://172.16.11.202:8088/goods/upload\"\r\n                :show-file-list=\"false\"\r\n                :on-success=\"handleAvatarSuccess\"\r\n                :before-upload=\"beforeAvatarUpload\"\r\n              >\r\n                <img\r\n                  v-if=\" accountInfo.imgUrl\"\r\n                  :src=\"'http://172.16.11.202:8088/upload/goods/' + accountInfo.imgUrl\"\r\n                  class=\"avatar\"\r\n                />\r\n                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n              </el-upload> \r\n\r\n\r\n    \r\n\r\n            </el-col>\r\n\r\n            <el-col :span=\"16\">\r\n              <el-button @click=\"beforeAvatarUpload2\" type=\"primary\">修改头像</el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </p>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* 引入接口函数 */\r\nimport { getAccountInfo, editAvatarImg } from \"../api/account\";\r\n\r\n/* 格式化时间 */\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n       serveApi: \"http://172.16.11.202:8088/upload/goods/\",\r\n      accountInfo: {\r\n        id: \"\",\r\n        account: \"\",\r\n        userGroup: \"\",\r\n        time: \"\",\r\n        imgUrl: \"\" //用于头像\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    /* 上传图片后 马上显示在页面上 */\r\n    handleAvatarSuccess(res, file) {\r\n      console.log(res); // 可以获取到图片上传后的数据\r\n      let { code, imgUrl } = res;\r\n      if (code === 0) {\r\n        this.accountInfo.imgUrl = imgUrl;\r\n      }\r\n    },\r\n    /* 图片 格式和 大小 限定 */\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isPNG = file.type === \"image/png\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!(isJPG || isPNG)) {\r\n        this.$message.error(\"上传头像图片只能是 JPG或者PNG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    /* 用户信息的接口 */\r\n    async GetAccountInfo() {\r\n      let { accountInfo } = await getAccountInfo();\r\n\r\n      console.log(accountInfo);\r\n\r\n      this.accountInfo = accountInfo;\r\n    },\r\n    /* 保存头像 */\r\n    async beforeAvatarUpload2() {\r\n\r\n\r\n      console.log(this.accountInfo.imgUrl)\r\n\r\n      let { code } = await editAvatarImg({ imgUrl: this.accountInfo.imgUrl });\r\n\r\n        if (code === 0) {\r\n          console.log('1')\r\n          //告诉头部 头像更改了\r\n           this.$bus.$emit(\"updateAvatar\");\r\n      }  \r\n    }\r\n  },\r\n  created() {\r\n    this.GetAccountInfo(); //一进入页面就调用 用户信息接口\r\n\r\n    \r\n  },\r\n  filters: {\r\n    // 过滤时间\r\n    filterTime(time) {\r\n      return moment(time).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.personcente {\r\n  .tatle {\r\n    margin: 0 0 20px 0;\r\n  }\r\n  p {\r\n    min-height: 20px;\r\n    padding: 20px 0;\r\n    border-bottom: 1px solid #f1f1f1;\r\n    color: #454648;\r\n    // display: flex;\r\n  }\r\n\r\n  .descride-bottom {\r\n    margin-top: 20px;\r\n    margin-right: 30px;\r\n  }\r\n  .standard-inp {\r\n    width: 180px;\r\n  }\r\n  .avatar-uploader {\r\n    width: 178px;\r\n    height: 178px;\r\n    border: 1px dashed #ccc;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  .avatar-uploader:hover {\r\n    border-color: #409eff;\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n\r\n  .el-col {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .el-button {\r\n      margin-top: 70px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonCente.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonCente.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonCente.vue?vue&type=template&id=3b5dcca8&scoped=true&\"\nimport script from \"./PersonCente.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonCente.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PersonCente.vue?vue&type=style&index=0&id=3b5dcca8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b5dcca8\",\n  null\n  \n)\n\nexport default component.exports","/**\r\n * 账号管理接口\r\n */\r\n\r\nimport req from '@/utils/request' //引入封装的axios\r\n\r\n//验证账号是否重复\r\nexport const registers = params => req.post('/account/registers', params)\r\n\r\n// 添加账号\r\nexport const addAccount = params => req.post('/account/accountadd', params)\r\n\r\n// 渲染列表(分页)\r\nexport const accountlist = params => req.get('/account/accountlist', params)\r\n\r\n// 单个删除\r\nexport const accountDel = params => req.get('/account/accountdel', params)\r\n\r\n//多个删除\r\nexport const batchdel = params => req.get('/account/accountbatchdel', params)\r\n\r\n//编辑\r\nexport const accountedit = params => req.post('/account/accountedit', params)\r\n\r\n//登录\r\nexport const checklogin = params => req.post('/account/checklogin', params)\r\n\r\n//原密码验证是否存在 验证旧密码\r\nexport const checkOldPwd = params => req.get('/account/checkoldpwd', params)\r\n\r\n//修改密码\r\nexport const pwdedit = params => req.post('/account/passwordedit', params)\r\n\r\n// 获取账号信息\r\nexport const getAccountInfo = params => req.get('/account/accountinfo', params)\r\n\r\n// 修改头像\r\nexport const editAvatarImg = params => req.get('/account/avataredit', params)\r\n\r\n \r\n \r\n\r\n\r\n\r\n\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonCente.vue?vue&type=style&index=0&id=3b5dcca8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonCente.vue?vue&type=style&index=0&id=3b5dcca8&lang=less&scoped=true&\""],"sourceRoot":""}